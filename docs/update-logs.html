<!DOCTYPE html>
<html lang="zh">
<!-- 
    InPageEdit-v2 Github pages template by Dianliang233
    Licence: GPLv3-only
    Proudly using MDUI(https://mdui.org/) (MIT)
  -->

<head>
  <title>InPageEdit-v2 | A MediaWiki Quick Edit Gadget by Dragon Fish</title>
  <meta name="viewport" content="width=device-width">
  <meta name="keywords" content="InPageEdit,InPageEdit-v2,MediaWiki,MediaWiki Gadget">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui/dist/css/mdui.min.css">
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/google/material-design-icons@master/iconfont/material-icons.css">
  <link rel="stylesheet" href="./src/css/template.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.0/dist/jquery.min.js"></script>
  <!-- 花 里 胡 哨 -->
  <script>console.info('    ____      ____                   ______    ___ __              _    _____ \n   /  _/___  / __ \\____ _____ ____  / ____/___/ (_) /_            | |  / /__ \\\n   / // __ \\/ /_/ / __ `/ __ `/ _ \\/ __/ / __  / / __/  ______    | | / /__/ /\n _/ // / / / ____/ /_/ / /_/ /  __/ /___/ /_/ / / /_   /_____/    | |/ // __/ \n/___/_/ /_/_/    \\__,_/\\__, /\\___/_____/\\__,_/_/\\__/              |___//____/ \n                      /____/\nInPageEdit-v2 Github pages template by Dianliang233\nLicence: GPLv3-only\nProudly using MDUI(https://mdui.org/) (MIT)');</script>
  <style>
    h2 {
      border: none;
      background: linear-gradient(90deg, rgb(127, 172, 255), rgba(210, 232, 255, 0));
      background-position: 0 1em;
      background-repeat: no-repeat;
      background-size: 75% 4px;
      text-shadow: 2px 0px 0px white;
    }

    h3 {
      border: none;
      background: linear-gradient(90deg, rgb(148, 183, 248), rgba(210, 232, 255, 0));
      background-position: 0 1em;
      background-repeat: no-repeat;
      background-size: 60% 3px;
      text-shadow: 2px 0px 0px white;
    }
  </style>
</head>

<body class="mdui-theme-primary-white mdui-theme-accent-indigo">
  <!-- 顶部导航栏 -->
  <header class="mdui-appbar mdui-headroom" mdui-headroom>
    <div class="mdui-toolbar mdui-color-white">
      <button class="mdui-btn mdui-btn-icon mdui-ripple" id="drawer-toggle"
        mdui-drawer="{target: '#left-drawer', overlay: true, swipe: true}"><i
          class="mdui-icon material-icons">menu</i></button>
      <a class="mdui-typo-headline font-ps"><span class="IPE-logo-1">In</span><span
          class="IPE-logo-2">Pag<span>e</span></span><span class="IPE-logo-3">Edit</span><span class="IPE-logo-4">
          v2</span></a>
      <a class="mdui-typo-title"></a>
      <div class="mdui-toolbar-spacer"></div>
      <a href="https://github.com/Dragon-Fish/InPageEdit-v2" target="_blank" class="mdui-btn mdui-btn-icon mdui-ripple">
        <svg version="1.1" id="Layer_1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"
          x="0px" y="0px" viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve" class="mdui-icon"
          style="width: 24px;height:24px;">
          <path fill-rule="evenodd" clip-rule="evenodd" fill="#000" d="M18,1.4C9,1.4,1.7,8.7,1.7,17.7c0,7.2,4.7,13.3,11.1,15.5
              c0.8,0.1,1.1-0.4,1.1-0.8c0-0.4,0-1.4,0-2.8c-4.5,1-5.5-2.2-5.5-2.2c-0.7-1.9-1.8-2.4-1.8-2.4c-1.5-1,0.1-1,0.1-1
              c1.6,0.1,2.5,1.7,2.5,1.7c1.5,2.5,3.8,1.8,4.7,1.4c0.1-1.1,0.6-1.8,1-2.2c-3.6-0.4-7.4-1.8-7.4-8.1c0-1.8,0.6-3.2,1.7-4.4
              c-0.2-0.4-0.7-2.1,0.2-4.3c0,0,1.4-0.4,4.5,1.7c1.3-0.4,2.7-0.5,4.1-0.5c1.4,0,2.8,0.2,4.1,0.5c3.1-2.1,4.5-1.7,4.5-1.7
              c0.9,2.2,0.3,3.9,0.2,4.3c1,1.1,1.7,2.6,1.7,4.4c0,6.3-3.8,7.6-7.4,8c0.6,0.5,1.1,1.5,1.1,3c0,2.2,0,3.9,0,4.5
              c0,0.4,0.3,0.9,1.1,0.8c6.5-2.2,11.1-8.3,11.1-15.5C34.3,8.7,27,1.4,18,1.4z">
          </path>
        </svg>
      </a>
    </div>
  </header>
  <br>
  <main class="mdui-container">
    <!-- 请开始你的表演 -->
    <h1>InPageEdit-v2 Update Logs</h1>
    <article>
      <div id="updatelogs-progress" style="margin: 80px auto; text-align: center;"><img
          src="./src/ms-loading-spinner.svg"><br>Loading data...</div>
    </article>
  </main>
  <br>
  <footer class="mdui-typo mdui-color-white mdui-shadow-4">
    <div class="mdui-container">
      <h5 class="font-ps"><span class="IPE-logo-1">In</span><span class="IPE-logo-2">Pag<span>e</span></span><span
          class="IPE-logo-3">Edit</span><span class="IPE-logo-4"> v2</span></h5>
      <div class="mdui-col-sm-12"><small>
          <p>InPageEdit-v2 is a JavaScript-based MediaWiki plug-in, written by <a
              href="https://epbureau.fandom.com/wiki/%E6%9C%BA%E6%99%BA%E7%9A%84%E5%B0%8F%E9%B1%BC%E5%90%9B">机智的小鱼君.
            </a></p>
          <p>&copy; Copyright 机智的小鱼君 & <a href="https://github.com/Dragon-Fish/InPageEdit-v2/graphs/contributors">other
              contributors</a>. Some right reserved. <br>
            Code is available under the <a href="https://github.com/Dragon-Fish/InPageEdit-v2/blob/master/LICENSE">GNU
              General Public License v3.0</a>; additional terms may apply. </p>
        </small>
      </div>
    </div>
    </div>
  </footer>
  <div class="mdui-drawer mdui-drawer-full-height mdui-drawer-close mdui-color-white" id="left-drawer">
    <div class="mdui-list">
      <div class="mdui-grid-tile">
        <a href="javascript:;"><img src="https://bingpic.wd-api.com/" /></a>
        <div class="mdui-grid-tile-actions">
          <div class="mdui-grid-tile-text">
            <div class="mdui-grid-tile-title">InPageEdit-v2</div>
          </div>
        </div>
      </div>
      <a class="mdui-list-item mdui-ripple" href="./index.html">
        <i class="mdui-list-item-icon mdui-icon material-icons">home</i>
        <div class="mdui-list-item-content">Home</div>
      </a>
      <a class="mdui-list-item mdui-ripple" href="./about.html">
        <i class="mdui-list-item-icon mdui-icon material-icons">info</i>
        <div class="mdui-list-item-content">About</div>
      </a>
      <a href="./issues.html" class="mdui-list-item mdui-ripple">
        <i class="mdui-list-item-icon mdui-icon material-icons">report_problem</i>
        <div class="mdui-list-item-content">Issues</div>
      </a>
      <a class="mdui-list-item mdui-ripple mdui-list-item-active" href="./update-logs.html">
        <i class="mdui-list-item-icon mdui-icon material-icons">update</i>
        <div class="mdui-list-item-content">Update Logs</div>
      </a>
      <div class="mdui-collapse-item mdui-collapse-item-open">
        <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
          <i class="mdui-list-item-icon mdui-icon material-icons">launch</i>
          <div class="mdui-list-item-content">Or view on...</div>
        </div>
        <div class="mdui-collapse-item-body mdui-list mdui-list-dense">
          <div class="mdui-list-item mdui-ripple"><a href="https://github.com/Dragon-Fish/InPageEdit-v2">Github</a>
          </div>
          <div class="mdui-list-item mdui-ripple"><a href="https://common.wjghj.cn/wiki/InPageEdit-v2">Wjghj Common</a>
          </div>
          <div class="mdui-list-item mdui-ripple"><a
              href="https://zh.moegirl.org/User:机智的小鱼君/InPageEdit-v2">Moegirlpedia</a></div>
          <div class="mdui-list-item mdui-ripple"><a href="https://dev.fandom.com/wiki/InPageEdit-v2">Fandom Developers
              Wiki</a></div>
        </div>
      </div>
    </div>
  </div>
  <script>
    $(function () {
      /**
       * 更新列表
       * AJAX获取更新列表的JSON
       * Author: 机智的小鱼君
       **/
      $.ajax({
        url: 'update-logs.json',
        dataType: 'json',
        success: function (data) {
          var data = data || {};

          // 更新列表偶尔会采取简单的markdown语法，格式化
          function conversion(text) {
            var text = text;
            if (typeof text !== 'string') return 'Error.';
            text = text
              .replace(/\[\[(issues|pull)\#(.+?)\]\]/g, '[https://github.com/Dragon-Fish/InPageEdit-v2/$1/$2]($1#$2)') // issues 或 pull
              .replace(/\[(.+?)\]\((.+?)\)/g, '<a href="$1" target="_blank">$2</a>') // 链接
              .replace(/<(http:\/\/|https:\/\/)(.+?)>/g, '<a href="$1$2" target="_blank>$1$2</a>') // 直接链接
              .replace(/\*\*(.+?)\*\*/g, '<b>$1</b>') // 粗体
              .replace(/\*(.+?)\*/g, '<i>$1</i>') // 斜体
              .replace(/`(.+?)`/g, '<code>$1</code>');
            return text;
          }

          // 将json数据格式化为html
          var list = data.list || [];
          var html = $('<section>', { class: 'ipe-update-logs', style: 'display:none' }); // 创建外部html

          // 遍历整体数组
          for (var k1 = 0; k1 < list.length; k1++) {
            var version = list[k1]['version'], // 本次遍历的版本号
              date = list[k1]['date'] || '-', // 本次遍历的更新时间
              description = list[k1]['description'] || []; // 本次遍历的说明列表

            // 建立本次遍历的外部html
            var versionGroup = $('<div>', { class: 'version-group' });
            var versionHTML = $('<h2>', { text: version, id: version.replace(/\./g, '-').replace(/\(/g, '_').replace(/\)/g, '') }), // 本次遍历的版本的html对象
              dateHTML = $('<p>', { text: 'Release date: ' + date }); // 本次遍历的时间的html对象

            // 遍历说明列表
            for (var k2 = 0; k2 < description.length; k2++) {
              var type = description[k2]['type'] || 'note', // 本次遍历的变更类型
                type = type.toLowerCase(), // 统一转换为小写
                main = description[k2]['main'] || '', // 本次遍历的主要文字
                more = description[k2]['more'] || []; // 本次遍历的更多说明列表
              if (typeof more === 'string') more = [more]; // 将更多说明转换为数组

              var versionChanges = $('<ul>', { class: 'version-chages-list' }), // 建立外部乱序列表项
                typeHTML = $('<span>', { text: type, class: 'status-tag ' + type }), // 将更改类型装换位html对象
                mainHTML = $('<li>', { class: 'version-chage', html: typeHTML.prop('outerHTML') + conversion(main) }), // 将主要说明组合为html对象
                moreHTML = $('<ul>', { class: 'change-more-info' }); // 建立更多说明的乱序列表

              for (var k3 = 0; k3 < more.length; k3++) {
                moreHTML.append(
                  $('<li>', { html: conversion(more['k3']) })
                )
              }
              versionChanges.append(
                mainHTML,
                moreHTML
              );
            }
            versionGroup = versionGroup.append(
              versionHTML,
              dateHTML,
              versionChanges
            );
            html = html.append(versionGroup);
          }

          // 安置文档
          $('#updatelogs-progress')
            .after(html) // 插入html
            .addClass('done') // 将progress切换为完成
            .delay(300).fadeOut(700); // 1s后隐藏progress
          // 将版本号显示在标题
          $('#yourVersion').html(localStorage.InPageEditVersion);
          // 1s后显示html
          setTimeout(function () {
            $('.ipe-update-logs').show(800);
          }, 1000);
        },
        fail: function () {
          // placeholder
        }
      });
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mdui/dist/js/mdui.min.js"></script>
  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
  <script src="./src/js/template.js"></script>
</body>

</html>